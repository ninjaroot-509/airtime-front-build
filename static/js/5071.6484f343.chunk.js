"use strict";(self.webpackChunkbling=self.webpackChunkbling||[]).push([[5071],{18456:(e,s,r)=>{r.d(s,{Z:()=>p});var o=r(26769),t=r.n(o),n=r(697),a=r(20890),i=r(50533),l=r(11087),c=r(93517),d=r(80184);function m(e){let{links:s,activeLast:r=!1,...o}=e;const t=s[s.length-1].name,i=s.map((e=>(0,d.jsx)(u,{link:e},e.name))),l=s.map((e=>(0,d.jsx)("div",{children:e.name!==t?(0,d.jsx)(u,{link:e}):(0,d.jsx)(a.Z,{variant:"body2",sx:{maxWidth:260,overflow:"hidden",whiteSpace:"nowrap",color:"text.disabled",textOverflow:"ellipsis"},children:t})},e.name)));return(0,d.jsx)(c.Z,{separator:(0,d.jsx)(n.Z,{component:"span",sx:{width:4,height:4,borderRadius:"50%",bgcolor:"text.disabled"}}),...o,children:r?i:l})}function u(e){let{link:s}=e;const{href:r,name:o,icon:t}=s;return(0,d.jsxs)(i.Z,{variant:"body2",component:l.rU,to:r||"#",sx:{lineHeight:2,display:"flex",alignItems:"center",color:"text.primary","& > div":{display:"inherit"}},children:[t&&(0,d.jsx)(n.Z,{sx:{mr:1,"& svg":{width:20,height:20}},children:t}),o]},o)}function p(e){let{links:s,action:r,heading:o,moreLink:l=[],sx:c,...u}=e;return(0,d.jsxs)(n.Z,{sx:{mb:5,...c},children:[(0,d.jsxs)(n.Z,{sx:{display:"flex",alignItems:"center"},children:[(0,d.jsxs)(n.Z,{sx:{flexGrow:1},children:[(0,d.jsx)(a.Z,{variant:"h4",gutterBottom:!0,children:o}),(0,d.jsx)(m,{links:s,...u})]}),r&&(0,d.jsx)(n.Z,{sx:{flexShrink:0},children:r})]}),(0,d.jsx)(n.Z,{sx:{mt:2},children:t()(l)?(0,d.jsx)(i.Z,{href:l,target:"_blank",rel:"noopener",variant:"body2",children:l}):l.map((e=>(0,d.jsx)(i.Z,{noWrap:!0,href:e,variant:"body2",target:"_blank",rel:"noopener",sx:{display:"table"},children:e},e)))})]})}},75071:(e,s,r)=>{r.r(s),r.d(s,{default:()=>I});var o=r(72791),t=r(35345),n=r(57689),a=r(89164),i=r(38072),l=r(61069),c=r(85703),d=r(77259),m=r(25212),u=r(18456),p=r(81724),h=r(61134),x=r(44695),f=r(39709),v=r(61889),g=r(57621),b=r(697),j=r(20890),Z=r(36314),y=r(2190),w=r(67330),C=r(33168),_=r(4709),k=r(80184);function S(e){var s,r;let{isEdit:a,currentUserCommission:c}=e;const m=(0,n.s0)(),{t:u}=(0,C.$)(),{enqueueSnackbar:S}=(0,t.Ds)(),I=p.Ry().shape({user:p.Z_().required(u("field.required",{obj:u("field.user")})),operator:p.Z_().required(u("field.required",{obj:u("field.operator")})),commission:p.Rx().required(u("field.required",{obj:u("field.commission")}))}),P=(0,o.useMemo)((()=>({user:(null===c||void 0===c?void 0:c.user)||"",operator:(null===c||void 0===c?void 0:c.operator)||0,commission:(null===c||void 0===c?void 0:c.commission)||0,is_active:(null===c||void 0===c?void 0:c.is_active)||!0,keyId:(null===c||void 0===c?void 0:c.id)||-1})),[c]),R=(0,h.cI)({resolver:(0,x.X)(I),defaultValues:P}),B=(0,l.I0)(),{reset:q,watch:A,control:E,setValue:M,handleSubmit:N,formState:{isSubmitting:T}}=R,U=A();(0,o.useEffect)((()=>{a&&c&&q(P),a||q(P)}),[a,c]);const{selectsupervisors:D}=(0,l.v9)((e=>e.supervisor)),{operators:z}=(0,l.v9)((e=>e.usercommission));return(0,o.useEffect)((()=>{B((0,_.DJ)()),B((0,d.vU)(1,1e3))}),[B]),(0,k.jsx)(y.RV,{methods:R,onSubmit:N((async()=>{try{if(a){const e=await(0,d.aX)(U);B((0,d.KN)(e))}else{const e=await(0,d.qH)(U);B((0,d.Y$)(e))}q(),S(u(a?"success.UPDATED":"success.CREATE")),m(i.vB.configuration.usercommission)}catch(e){console.error(e);const s=(0,w.Z)(e);S(u("error.".concat(s)),{variant:"error"})}})),children:(0,k.jsx)(v.ZP,{container:!0,spacing:3,children:(0,k.jsx)(v.ZP,{item:!0,xs:12,md:8,children:(0,k.jsxs)(g.Z,{sx:{p:3},children:[(0,k.jsxs)(b.Z,{sx:{display:"grid",columnGap:2,rowGap:3,gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(2, 1fr)"}},children:[(0,k.jsxs)(y.Cc,{name:"user",label:u("field.user"),placeholder:u("field.user"),children:[(0,k.jsx)("option",{value:""}),null===D||void 0===D||null===(s=D.data)||void 0===s?void 0:s.map((e=>(0,k.jsx)("option",{value:e.uid,children:e.full_name},e.uid)))]}),(0,k.jsxs)(y.Cc,{name:"operator",label:u("field.operator"),placeholder:u("field.operator"),children:[(0,k.jsx)("option",{value:""}),null===z||void 0===z||null===(r=z.data)||void 0===r?void 0:r.map((e=>(0,k.jsx)("option",{value:e.id,children:e.name},e.id)))]}),(0,k.jsx)(y.au,{name:"commission",label:u("field.commission")}),(0,k.jsx)(y._e,{name:"is_active",labelPlacement:"start",label:(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(j.Z,{variant:"subtitle2",sx:{mb:.5},children:"Activate ?"}),(0,k.jsx)(j.Z,{variant:"body2",sx:{color:"text.secondary"},children:"Enabling this will automatically activate the user commission"})]}),sx:{mx:0,width:1,justifyContent:"space-between"}})]}),(0,k.jsx)(Z.Z,{alignItems:"flex-end",sx:{mt:3},children:(0,k.jsx)(f.Z,{type:"submit",variant:"contained",loading:T,children:a?u("params.save_change"):u("params.create",{obj:u("p_usercommission.usercommission")})})})]})})})})}function I(){const{themeStretch:e}=(0,c.Z)(),{t:s}=(0,C.$)(),r=(0,n.s0)(),p=(0,l.I0)(),{enqueueSnackbar:h}=(0,t.Ds)(),{pathname:x}=(0,n.TH)(),{userCommissionKey:f=""}=(0,n.UO)(),v=x.includes("edit"),[g,b]=(0,o.useState)(null);(0,o.useEffect)((()=>{v&&j()}),[f]);const j=async()=>{try{const e=await(0,d.gb)(Number(f));b(e),p((0,d.oj)())}catch(e){console.error(e);const s=(0,w.Z)(e);h(s,{variant:"error"}),r(i.vB.configuration.usercommission)}};return(0,k.jsx)(m.Z,{title:"Configuration: ".concat(s(v?"p_usercommission.edit_usercommission":"p_usercommission.new_usercommission")),children:(0,k.jsxs)(a.Z,{maxWidth:!e&&"lg",children:[(0,k.jsx)(u.Z,{heading:s(v?"p_usercommission.edit_usercommission":"p_usercommission.new_usercommission"),links:[{name:s("params.dashboard"),href:i.vB.root},{name:s("params.configuration"),href:i.vB.configuration.root},{name:v?"".concat(s("p_usercommission.usercommission")," ").concat(null===g||void 0===g?void 0:g.type_transaction_name):s("p_usercommission.new_usercommission")}]}),(0,k.jsx)(S,{isEdit:v,currentUserCommission:g})]})})}},67330:(e,s,r)=>{r.d(s,{Z:()=>o});const o=e=>{var s;if(null!==(s=e.response)&&void 0!==s&&s.data){if("string"===typeof e.response.data)return e.response.data;if(Array.isArray(e.response.data))return e.response.data[0];if(e.response.data.detail)return e.response.data.detail}return"An error occurred. Please try again."}},93517:(e,s,r)=>{r.d(s,{Z:()=>R});var o=r(87462),t=r(63366),n=r(72791),a=(r(57441),r(63733)),i=r(94419),l=r(40536),c=r(66934),d=r(31402),m=r(20890),u=r(12065),p=r(74223),h=r(80184);const x=(0,p.Z)((0,h.jsx)("path",{d:"M6 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm12 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm-6 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}),"MoreHoriz");var f=r(95080);const v=["slots","slotProps"],g=(0,c.ZP)(f.Z)((e=>{let{theme:s}=e;return(0,o.Z)({display:"flex",marginLeft:"calc(".concat(s.spacing(1)," * 0.5)"),marginRight:"calc(".concat(s.spacing(1)," * 0.5)")},"light"===s.palette.mode?{backgroundColor:s.palette.grey[100],color:s.palette.grey[700]}:{backgroundColor:s.palette.grey[700],color:s.palette.grey[100]},{borderRadius:2,"&:hover, &:focus":(0,o.Z)({},"light"===s.palette.mode?{backgroundColor:s.palette.grey[200]}:{backgroundColor:s.palette.grey[600]}),"&:active":(0,o.Z)({boxShadow:s.shadows[0]},"light"===s.palette.mode?{backgroundColor:(0,u._4)(s.palette.grey[200],.12)}:{backgroundColor:(0,u._4)(s.palette.grey[600],.12)})})})),b=(0,c.ZP)(x)({width:24,height:16});const j=function(e){const{slots:s={},slotProps:r={}}=e,n=(0,t.Z)(e,v),a=e;return(0,h.jsx)("li",{children:(0,h.jsx)(g,(0,o.Z)({focusRipple:!0},n,{ownerState:a,children:(0,h.jsx)(b,(0,o.Z)({as:s.CollapsedIcon,ownerState:a},r.collapsedIcon))}))})};var Z=r(75878),y=r(21217);function w(e){return(0,y.Z)("MuiBreadcrumbs",e)}const C=(0,Z.Z)("MuiBreadcrumbs",["root","ol","li","separator"]),_=["children","className","component","slots","slotProps","expandText","itemsAfterCollapse","itemsBeforeCollapse","maxItems","separator"],k=(0,c.ZP)(m.Z,{name:"MuiBreadcrumbs",slot:"Root",overridesResolver:(e,s)=>[{["& .".concat(C.li)]:s.li},s.root]})({}),S=(0,c.ZP)("ol",{name:"MuiBreadcrumbs",slot:"Ol",overridesResolver:(e,s)=>s.ol})({display:"flex",flexWrap:"wrap",alignItems:"center",padding:0,margin:0,listStyle:"none"}),I=(0,c.ZP)("li",{name:"MuiBreadcrumbs",slot:"Separator",overridesResolver:(e,s)=>s.separator})({display:"flex",userSelect:"none",marginLeft:8,marginRight:8});function P(e,s,r,o){return e.reduce(((t,n,a)=>(a<e.length-1?t=t.concat(n,(0,h.jsx)(I,{"aria-hidden":!0,className:s,ownerState:o,children:r},"separator-".concat(a))):t.push(n),t)),[])}const R=n.forwardRef((function(e,s){const r=(0,d.Z)({props:e,name:"MuiBreadcrumbs"}),{children:c,className:m,component:u="nav",slots:p={},slotProps:x={},expandText:f="Show path",itemsAfterCollapse:v=1,itemsBeforeCollapse:g=1,maxItems:b=8,separator:Z="/"}=r,y=(0,t.Z)(r,_),[C,I]=n.useState(!1),R=(0,o.Z)({},r,{component:u,expanded:C,expandText:f,itemsAfterCollapse:v,itemsBeforeCollapse:g,maxItems:b,separator:Z}),B=(e=>{const{classes:s}=e;return(0,i.Z)({root:["root"],li:["li"],ol:["ol"],separator:["separator"]},w,s)})(R),q=(0,l.y)({elementType:p.CollapsedIcon,externalSlotProps:x.collapsedIcon,ownerState:R}),A=n.useRef(null),E=n.Children.toArray(c).filter((e=>n.isValidElement(e))).map(((e,s)=>(0,h.jsx)("li",{className:B.li,children:e},"child-".concat(s))));return(0,h.jsx)(k,(0,o.Z)({ref:s,component:u,color:"text.secondary",className:(0,a.Z)(B.root,m),ownerState:R},y,{children:(0,h.jsx)(S,{className:B.ol,ref:A,ownerState:R,children:P(C||b&&E.length<=b?E:(e=>g+v>=e.length?e:[...e.slice(0,g),(0,h.jsx)(j,{"aria-label":f,slots:{CollapsedIcon:p.CollapsedIcon},slotProps:{collapsedIcon:q},onClick:()=>{I(!0);const e=A.current.querySelector("a[href],button,[tabindex]");e&&e.focus()}},"ellipsis"),...e.slice(e.length-v,e.length)])(E),B.separator,Z,R)})}))}))}}]);
//# sourceMappingURL=5071.6484f343.chunk.js.map